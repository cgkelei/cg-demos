<Effect name="Sprite">

<Shader name="SpriteVS" stage="Vertex" entry="main">
<ShaderSource>
<![CDATA[
#version 330

//uniform mat4 ProjMat;
uniform vec2 WindowSize;

in vec3 iPos;
in vec2 iTex;
in vec4 iColor;

out vec2 oTex;
out vec4 oColor;

void main()
{
	vec4 oPos = vec4(iPos, 1.0);
	
	oPos.xy = vec2(2.0 * iPos.x - WindowSize.x,  WindowSize.y - 2.0 * iPos.y ) / WindowSize;
	
	//gl_Position = vec4(iPos, 1) * ProjMat;
	
	gl_Position = oPos;
	
	oTex = iTex;	
#ifndef Direct3D		
	oTex.y = 1.0 - oTex.y;
#endif

	oColor = iColor;
}

]]>
</ShaderSource>
</Shader>

<Shader name="SpritePS" stage="Pixel" entry="main">
<ShaderSource>
<![CDATA[

uniform sampler2D SpriteTexture;

in vec2 oTex;
in vec4 oColor;

void main()
{
	gl_FragColor = oColor * texture2D(SpriteTexture, oTex);
}

]]>
</ShaderSource>
</Shader>

<Technique name="SpriteTech">
	<Pass name="p0">
		<State name="BlendEnable" value="true"/>
		<State name="SrcBlend" value="SrcAlpha"/>
		<State name="DestBlend" value="InvSrcAlpha"/>
		<State name="DepthFunc" value="LessEqual"/>
		<State name="CullMode" value="None"/> 	
		
		<VertexShader name="SpriteVS"/>
		<PixelShader name="SpritePS"/>
			
	</Pass>
</Technique>

</Effect>
