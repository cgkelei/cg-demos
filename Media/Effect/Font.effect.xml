<Effect name="Font">

<Shader name="FontVS" stage="Vertex" entry="main">
<ShaderSource>
<![CDATA[
#version 330

uniform vec2 WindowSize;

in vec3 iPos;
in vec2 iTex0;
in vec4 iColor;

out vec2 oTex;
out vec4 oColor;

void main()
{
	vec4 oPos = vec4(iPos, 1.0);
	
	oPos.xy = vec2(2.0 * iPos.x - WindowSize.x,  WindowSize.y - 2.0 * iPos.y ) / WindowSize;
	
	gl_Position = oPos;
	oTex = iTex0;
	oColor = iColor;
}

]]>
</ShaderSource>
</Shader>

<Shader name="FontPS" stage="Pixel" entry="main">
<ShaderSource>
<![CDATA[

uniform sampler2D SpriteTexture;

in vec2 oTex;
in vec4 oColor;

void main()
{
    float dist = texture2D(SpriteTexture, oTex).a;
    float width = fwidth(dist);
    float alpha = smoothstep(0.5-width, 0.5+width, dist);
    gl_FragColor = vec4(oColor.xyz, alpha);
}

]]>
</ShaderSource>
</Shader>

<Technique name="FontTech">
	<Pass name="p0">
		<State name="BlendEnable" value="true"/>
		<State name="SrcBlend" value="SrcAlpha"/>
		<State name="DestBlend" value="InvSrcAlpha"/>
		<State name="DepthFunc" value="LessEqual"/>
		
		<VertexShader name="FontVS"/>
		<PixelShader name="FontPS"/>			
	</Pass>
</Technique>

</Effect>